var isSuaraBerlangsung=!1,currentOptionIndex=-1;function cariNama(){for(var e=document.getElementById("search").value.toLowerCase(),t=document.getElementById("namaSelect").options,n=currentOptionIndex+1;n<t.length;n++){if(t[n].value.toLowerCase().includes(e))return document.getElementById("namaSelect").selectedIndex=n,void(currentOptionIndex=n)}for(n=0;n<=currentOptionIndex;n++){if(t[n].value.toLowerCase().includes(e))return document.getElementById("namaSelect").selectedIndex=n,void(currentOptionIndex=n)}showNotification("Nama tidak ditemukan.",!0)}function ubahKecepatanSuara(){var e=document.getElementById("kecepatanSuara"),t=document.getElementById("kecepatanSuaraLabel"),n=e.value;t.innerText="Kecepatan Suara: "+n+"x"}function ubahStatusPanggil(e){isSuaraBerlangsung=e,document.getElementById("panggilButton").disabled=e}function panggilSuara(){if(!isSuaraBerlangsung){var e=document.getElementById("namaSelect"),t=e.options[e.selectedIndex].value,n=document.getElementById("panggilButton");if(0===e.selectedIndex)showNotification("Pilih nama terlebih dahulu!",!0);else if(""!==t){var a=new SpeechSynthesisUtterance("WBP Atas Nama "+t+" Dibesuk"),i=document.getElementById("kecepatanSuara").value;a.rate=parseFloat(i),n.classList.add("panggil-button-spin"),ubahStatusPanggil(!0),speechSynthesis.speak(a),a.onend=function(e){n.classList.remove("panggil-button-spin"),ubahStatusPanggil(!1)}}}}var slider=document.getElementById("kecepatanSuara");function showNotification(e,t=!1){var n=document.getElementById("notification");n.innerText=e,n.classList.remove("error-notification"),t&&n.classList.add("error-notification"),n.style.display="block",document.getElementById("notification-sound").play(),setTimeout(function(){n.style.display="none"},3e3)}function updateSelectOptions(){var e,t,n,a;for(e=document.getElementById("search").value.toLowerCase(),n=(t=document.getElementById("namaSelect")).getElementsByTagName("option"),a=0;a<n.length;a++)(n[a].textContent||n[a].innerText).toLowerCase().indexOf(e)>-1?n[a].style.display="":n[a].style.display="none";for(a=0;a<n.length;a++)if(""===n[a].style.display){t.selectedIndex=a;break}}slider.addEventListener("input",ubahKecepatanSuara),document.getElementById("search").addEventListener("input",updateSelectOptions);var audio=new Audio("https://cdn.jsdelivr.net/gh/eliyantosarage/pemanggilan-wbp@main/assets/audio/attention.wav"),isAudioBermain=!1;function putarAudio(){isAudioBermain||(audio.play(),isAudioBermain=!0,document.getElementById("volumeButton").classList.add("panggil-button-spin"),audio.onended=function(){isAudioBermain=!1,document.getElementById("volumeButton").classList.remove("panggil-button-spin")})}function alarmSuara(){var e=document.getElementById("namaSelect"),t=e.options[e.selectedIndex].value,n=document.getElementById("alarmButton");if(0===e.selectedIndex)showNotification("Pilih nama terlebih dahulu!",!0);else if(""!==t){var a=new SpeechSynthesisUtterance("Pengunjung WBP Atas Nama "+t+" . Waktu Kunjungan Anda Telah Habis. Terima Kasih"),i=document.getElementById("kecepatanSuara").value;a.rate=parseFloat(i),n.classList.add("panggil-button-spin"),ubahStatusPanggil(!0),speechSynthesis.speak(a),a.onend=function(e){n.classList.remove("panggil-button-spin"),ubahStatusPanggil(!1)}}}
